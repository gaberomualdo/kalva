---
layout: default
title: "Your Feed"
stylesheet: "index"
---
<script>

var latestNews = [];

(function(){
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      latestNews = JSON.parse(this.responseText).articles;
      go();
    }
  };
  xhttp.open("GET", "https://newsapi.org/v2/top-headlines?country=us&apiKey=377facbb80c140388ec9cdb16a7f7ee0", true);
  xhttp.send();
  function go(){
    latestNews.forEach(function(newsArticle, newsIndex){
      var image = "";
      var no_image_class = "";
      if(!newsArticle.description){
        newsArticle.description = "";
      }
      if(newsArticle.urlToImage){
        image = "<img src='" + newsArticle.urlToImage + "' onerror='this.parentElement.classList.add(\"no_image\");this.outerHTML=\"\";'>";
      }else{
        no_image_class = "no_image";
      }
      document.querySelector("div.site_container ul.articles").innerHTML += `
      <a href="${newsArticle.url}" target="_blank" class="${no_image_class}">
        <div class='content'>
          <h1>${newsArticle.title}</h1>
          <p>${newsArticle.description}</p>
          <p class='meta'>By <strong>${newsArticle.source.name}</strong> on ${formatDate(new Date(newsArticle.publishedAt))}</p>
        </div>
        ${image}
      </a>
      `;
    });
  }
})();

</script>

<ul class="articles">

</ul>
