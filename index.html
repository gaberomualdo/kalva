---
layout: default
title: "Your Feed"
stylesheet: "index"
---
<script>

var latestNews = [];

function addArticle(newsArticle){
  var image = "";
  var has_image_style = "";
  var no_image_class = "";
  if(!newsArticle.description){
    newsArticle.description = "";
  }
  if(newsArticle.urlToImage){
    has_image_style = "display: none;";
    image = "<img src='" + newsArticle.urlToImage + "' onload='this.parentElement.removeAttribute(\"style\");' onerror='this.parentElement.classList.add(\"no_image\");this.parentElement.removeAttribute(\"style\");this.outerHTML=\"\";'>";
  }else{
    no_image_class = "no_image";
  }
  document.querySelector("div.site_container ul.articles").innerHTML += `
  <a href="${newsArticle.url}" target="_blank" class="${no_image_class}" style='${has_image_style}'>
    ${image}
    <div class='content'>
      <h1>${newsArticle.title}</h1>
      <p>${newsArticle.description}</p>
      <p class='meta'>By <strong>${newsArticle.source.name}</strong> on ${formatDate(new Date(newsArticle.publishedAt))}</p>
    </div>
  </a>
  `;
}

(function(){
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      latestNews = JSON.parse(this.responseText).articles;
      go();
    }
  };
  xhttp.open("GET", "https://newsapi.org/v2/top-headlines?country=us&apiKey=377facbb80c140388ec9cdb16a7f7ee0", true);
  xhttp.send();
  function go(){
    latestNews.forEach(function(newsArticle, newsIndex){
      addArticle(newsArticle);
    });
  }
})();

</script>

<ul class="articles">

</ul>
